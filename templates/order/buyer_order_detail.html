{% extends 'base.html' %} 

{% load static %}
{% block content %}

{% if title %}
<h2>{{ title }}</h2>
{% endif %}


<div class="container d-flex justify-content-center my-4">
    <div class="card" style="width: 40rem">
      <div class="card-body pb-0">
        <h3 class="card-title">Order ID: {{ object.id }}</h3>
        <table class="table table-borderless">
            <thead>
                <th scope="col">Order Item</th>
                <th scope="col">Quantity</th>
                <th scope="col">Price</th>
                <th scope="col">Seller</th>
            </thead>
            <tbody>
            {% for item in object.get_order_items.all %}
                <tr>
                    <td><a href="{% url 'plant:marketplace_plant_detail' item.user_plant.pk %}">
                        {{ item.user_plant.plant.scientific_name }}
                    </a></td>
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.user_plant.unit_price }}</td>
                    <td>{{ item.user_plant.user.username }}</td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
        <h5 class="card-subtitle mb-2">Date Placed: {{ object.creation_date }}</h5>

        <h5 class="mt-3 my-0">Description:</h5>
        <p class="card-text mb-2">
            {{ object.description }}
        </p>

        <h5 class="mt-3 my-0">Plant Care:</h5>
        <p class="card-text mb-2">
            {{ object.plant_care }}
        </p>

        <!-- Allow authenticated user to edit the plant details -->
        {% if user.is_authenticated %}
        <div class="card-footer bg-white mb-0" style="display: flex;">
            <a href="{{ object.get_update_url }}" class="btn custom-btn">Edit Plant</a>
        </div>
        {% endif %}
      </div>
    </div>
</div>

<!-- Decorative green block div in background -->
<div class="decorative-bg-div"></div>

{% endblock %}